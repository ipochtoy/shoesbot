# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ TrainingPeaks –∏ MyNetDiary

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö –∏–∑ TrainingPeaks –∏ –ø–∏—Ç–∞–Ω–∏–∏ –∏–∑ MyNetDiary, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç —á–µ—Ä–µ–∑ ChatGPT –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram.

## –ö–æ–º–∞–Ω–¥—ã –≤ Telegram

- `/report` - –ø–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö –∏ –ø–∏—Ç–∞–Ω–∏–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- –ö–Ω–æ–ø–∫–∞ "üîÑ –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç—á–µ—Ç" - –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç—á–µ—Ç –≤—Ä—É—á–Ω—É—é

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ

```bash
# OpenAI API –¥–ª—è ChatGPT –æ—Ç—á–µ—Ç–æ–≤
OPENAI_API_KEY=sk-...

# Telegram Chat ID –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ (–ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ @userinfobot)
FITNESS_REPORT_CHAT_ID=123456789
```

### TrainingPeaks (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# Client ID –∏ Secret –∏–∑ TrainingPeaks Developer Portal
TRAININGPEAKS_CLIENT_ID=your_client_id
TRAININGPEAKS_CLIENT_SECRET=your_client_secret

# Access Token –∏ Refresh Token (–ø–æ–ª—É—á–∞—é—Ç—Å—è –ø–æ—Å–ª–µ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
TRAININGPEAKS_ACCESS_TOKEN=your_access_token
TRAININGPEAKS_REFRESH_TOKEN=your_refresh_token
```

### MyNetDiary (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–í–∞—Ä–∏–∞–Ω—Ç 1: CSV —ç–∫—Å–ø–æ—Ä—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ MyNetDiary –≤ CSV
2. –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É:

```bash
MYNETDIARY_CSV_PATH=/path/to/mynetdiary_export.csv
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –í–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥**

```bash
MYNETDIARY_USERNAME=your_username
MYNETDIARY_PASSWORD=your_password
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TrainingPeaks API

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [TrainingPeaks Developer Portal](https://www.trainingpeaks.com/developer/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–æ–ª—É—á–∏—Ç–µ `Client ID` –∏ `Client Secret`
4. –£–∫–∞–∂–∏—Ç–µ Redirect URI (–Ω–∞–ø—Ä–∏–º–µ—Ä, `http://localhost:8080/callback`)
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:

```python
from shoesbot.trainingpeaks_client import TrainingPeaksClient

client = TrainingPeaksClient(
    client_id="your_client_id",
    client_secret="your_client_secret"
)

# –ü–æ–ª—É—á–∏—Ç—å URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
auth_url = client.get_authorization_url("http://localhost:8080/callback")
print(f"–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: {auth_url}")

# –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—É—á–∏—Ç–µ code –∏–∑ redirect URL
# –ó–∞—Ç–µ–º –æ–±–º–µ–Ω—è–π—Ç–µ –Ω–∞ —Ç–æ–∫–µ–Ω—ã:
tokens = client.exchange_code_for_tokens(code, "http://localhost:8080/callback")
print(f"Access Token: {tokens['access_token']}")
print(f"Refresh Token: {tokens['refresh_token']}")
```

6. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ `.env`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MyNetDiary

### CSV —ç–∫—Å–ø–æ—Ä—Ç (–ø—Ä–æ—â–µ –≤—Å–µ–≥–æ)

1. –í–æ–π–¥–∏—Ç–µ –≤ MyNetDiary
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
3. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –Ω—É–∂–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –≤ CSV
4. –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ `MYNETDIARY_CSV_PATH`

–§–æ—Ä–º–∞—Ç CSV –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏:
- `Date` - –¥–∞—Ç–∞ (YYYY-MM-DD)
- `Meal` - –ø—Ä–∏–µ–º –ø–∏—â–∏ (–ó–∞–≤—Ç—Ä–∞–∫, –û–±–µ–¥, –£–∂–∏–Ω –∏ —Ç.–¥.)
- `Food` - –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞
- `Calories` - –∫–∞–ª–æ—Ä–∏–∏

### –í–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥

–ï—Å–ª–∏ CSV –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥ (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–∞–π—Ç–∞ MyNetDiary).

## –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á–µ—Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 21:00 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `daily_fitness_scheduler.py`:

```python
self.send_time = time(21, 0)  # –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è
```

–ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–¥–∞):

```bash
FITNESS_REPORT_TIME=21:00
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–π –∑–∞–ø—Ä–æ—Å –æ—Ç—á–µ—Ç–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/report` –≤ Telegram –±–æ—Ç.

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

–û—Ç—á–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

- `trainingpeaks_client.py` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è TrainingPeaks API
- `mynetdiary_client.py` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è MyNetDiary (CSV –∏–ª–∏ –≤–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥)
- `chatgpt_reporter.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ ChatGPT
- `fitness_reporter.py` - –≥–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `daily_fitness_scheduler.py` - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤

## Troubleshooting

### TrainingPeaks: "No access token"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–æ–∫–µ–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ `.env`
2. –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫, –æ–Ω –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ refresh token
3. –ï—Å–ª–∏ refresh token –∏—Å—Ç–µ–∫, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ

### MyNetDiary: "No nutrition data"

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ CSV —Ñ–∞–π–ª—É (`MYNETDIARY_CSV_PATH`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ CSV —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –Ω—É–∂–Ω—É—é –¥–∞—Ç—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç CSV (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–ª–æ–Ω–∫–∏ Date, Meal, Food, Calories)

### ChatGPT: "OpenAI API key not set"

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `OPENAI_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–ª—é—á –≤–∞–ª–∏–¥–µ–Ω –∏ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ API

### –û—Ç—á–µ—Ç—ã –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `FITNESS_REPORT_CHAT_ID` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

