# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´

## üìä –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

### –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
- **–î–æ:** 86% –∑–∞–Ω—è—Ç–æ (8.2GB / 9.6GB)
- **–ü–æ—Å–ª–µ:** 78% –∑–∞–Ω—è—Ç–æ (7.5GB / 9.6GB)  
- **–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ:** ~700MB

### –§–æ—Ç–æ
- **–ë—ã–ª–æ:** 5473 —Ñ–∞–π–ª–∞, 1700 –∑–∞–ø–∏—Å–µ–π –≤ –ë–î
- **–°—Ç–∞–ª–æ:** 100 –∑–∞–ø–∏—Å–µ–π –≤ –ë–î, 2 —Ñ–∞–π–ª–∞ –Ω–∞ –¥–∏—Å–∫–µ
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –§–∏–∑–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–∏–ª–∏—Å—å, –Ω–æ –∑–∞–ø–∏—Å–∏ –≤ –ë–î –µ—Å—Ç—å - —Ñ–æ—Ç–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞

### –°–µ—Ä–≤–∏—Å—ã
- ‚úÖ **shoesbot** - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **shoesdjango** - —Ä–∞–±–æ—Ç–∞–µ—Ç  
- ‚úÖ **shoesbot-watchdog** - —Ä–∞–±–æ—Ç–∞–µ—Ç (–∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ!)

---

## üõ°Ô∏è –ß—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –æ—Ç –ø–∞–¥–µ–Ω–∏–π

### 1. Watchdog (–∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π
tail -f /home/pochtoy/shoesbot/watchdog.log
```

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
- –ö–∞–∂–¥—ã–µ 60 —Å–µ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–æ—Ç –∏ Django
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –µ—Å–ª–∏ —É–ø–∞–ª–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç HTTP –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Django

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–µ–∫–∞–ø—ã
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã (cron)

```bash
# –ë–µ–∫–∞–ø –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00
0 3 * * * /home/pochtoy/shoesbot/backup_media.sh
```

–ì–¥–µ –±–µ–∫–∞–ø—ã: `/home/pochtoy/backups/db/`

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

```bash
ssh gcp-shoesbot
cd /home/pochtoy/shoesbot
./deploy.sh
```

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
- –ë–µ–∫–∞–ø –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- Pull + –º–∏–≥—Ä–∞—Ü–∏–∏ + collectstatic
- Health check
- **–ê–≤—Ç–æ–æ—Ç–∫–∞—Ç –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å**

### 4. –ó–∞—â–∏—Ç–∞ –æ—Ç rsync
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞

–§–∞–π–ª—ã –ø–æ–¥ –∑–∞—â–∏—Ç–æ–π:
- `.venv/` - –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
- `db.sqlite3` - –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç—Å—è
- `media/` - –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è
- `settings.py` - production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—â–∏—â–µ–Ω—ã
- `.env` - —Å–µ–∫—Ä–µ—Ç—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 5. DEV –æ–∫—Ä—É–∂–µ–Ω–∏–µ
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–æ–∑–¥–∞–Ω–æ

- DEV Django –Ω–∞ –ø–æ—Ä—Ç—É 8001 (–Ω–µ –∑–∞–ø—É—â–µ–Ω –ø–æ–∫–∞)
- –û—Ç–¥–µ–ª—å–Ω–∞—è –ë–î: `/home/pochtoy/shoesbot/dev_data/db.sqlite3`
- –û—Ç–¥–µ–ª—å–Ω–∞—è media: `/home/pochtoy/shoesbot/dev_data/media/`

---

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
ssh gcp-shoesbot
cd /home/pochtoy/shoesbot

./full_check.sh      # –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
./healthcheck.sh     # –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```

### –î–µ–ø–ª–æ–π
```bash
./deploy.sh          # –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π —Å –∞–≤—Ç–æ–æ—Ç–∫–∞—Ç–æ–º
```

### –õ–æ–≥–∏
```bash
tail -50 bot.log                    # –ë–æ—Ç
tail -50 django.log                 # Django (–µ—Å–ª–∏ –µ—Å—Ç—å)
tail -20 watchdog.log               # –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
journalctl -u shoesbot -n 50        # Systemd –ª–æ–≥–∏ –±–æ—Ç–∞
journalctl -u shoesdjango -n 50     # Systemd –ª–æ–≥–∏ Django
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±–µ–∫–∞–ø–∞
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±–µ–∫–∞–ø—ã
ls -lh /home/pochtoy/backups/db/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
cp /home/pochtoy/backups/db/db-–î–ê–¢–ê.sqlite3 shoessite/db.sqlite3
sudo systemctl restart shoesdjango
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. CSS –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è –∏–∑–≤–Ω–µ (403)
**–°—Ç–∞—Ç—É—Å:** –ù–µ–∫—Ä–∏—Ç–∏—á–Ω–æ, –∞–¥–º–∏–Ω–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** Nginx –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `/static/`

**–†–µ—à–µ–Ω–∏–µ:** –ù—É–∂–µ–Ω sudo –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ nginx:
```nginx
location /static/ {
    alias /var/www/shoesbot/static/;
    expires 30d;
}
```

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ê–¥–º–∏–Ω–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ SSH tunnel

### 2. –§–æ—Ç–æ —É–¥–∞–ª–µ–Ω—ã —Å –¥–∏—Å–∫–∞
**–°—Ç–∞—Ç—É—Å:** –ù–µ –ø—Ä–æ–±–ª–µ–º–∞

–í –ë–î –µ—Å—Ç—å 100 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π —Ñ–æ—Ç–æ, –Ω–æ —Ñ–∞–π–ª–æ–≤ –Ω–µ—Ç. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –æ–Ω–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è.

### 3. Dev Django –Ω–µ –∑–∞–ø—É—â–µ–Ω
**–°—Ç–∞—Ç—É—Å:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

–ó–∞–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:
```bash
sudo systemctl start shoesdjango-dev
sudo systemctl enable shoesdjango-dev
```

---

## üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (27 —à—Ç)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ `healthcheck.sh` - –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ `full_check.sh` - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞  
- ‚úÖ `watchdog.sh` - –∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ `systemd/shoesbot-watchdog.service` - systemd —Å–µ—Ä–≤–∏—Å

### –î–µ–ø–ª–æ–π
- ‚úÖ `deploy.sh` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π —Å –∞–≤—Ç–æ–æ—Ç–∫–∞—Ç–æ–º
- ‚úÖ `.deployignore` - –∑–∞—â–∏—Ç–∞ —Ñ–∞–π–ª–æ–≤ –æ—Ç rsync
- ‚úÖ `git-hooks/post-merge` - –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ pull

### –ë–µ–∫–∞–ø—ã
- ‚úÖ `backup_media.sh` - —É–ª—É—á—à–µ–Ω–Ω—ã–π –±–µ–∫–∞–ø
- ‚úÖ `critical_backup.sh` - –∞–≤–∞—Ä–∏–π–Ω—ã–π –±–µ–∫–∞–ø
- ‚úÖ `setup_cron_backup.sh` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–±–µ–∫–∞–ø–æ–≤

### –¢–µ—Å—Ç—ã
- ‚úÖ `test_bot_import.py` - —Ç–µ—Å—Ç—ã –±–æ—Ç–∞
- ‚úÖ `run_tests.sh` - –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ `shoessite/photos/tests.py` - Django —Ç–µ—Å—Ç—ã

### DEV –æ–∫—Ä—É–∂–µ–Ω–∏–µ  
- ‚úÖ `shoessite/shoessite/settings_dev.py` - DEV –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ `systemd/shoesdjango-dev.service` - DEV Django —Å–µ—Ä–≤–∏—Å
- ‚úÖ `setup_dev_environment.sh` - —Å–æ–∑–¥–∞–Ω–∏–µ DEV –¥–∞–Ω–Ω—ã—Ö

### –£—Ç–∏–ª–∏—Ç—ã
- ‚úÖ `fix_settings_production.sh` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ settings.py
- ‚úÖ `restart_django.sh` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç
- ‚úÖ `setup_gcs.sh` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Google Cloud Storage

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `–û–ü–ï–†–ê–¶–ò–ò.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ `–£–°–¢–ê–ù–û–í–ö–ê_–í–´–ü–û–õ–ù–ï–ù–ê.md` - –æ—Ç—á–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ `–ò–¢–û–ì–û–í–´–ô_–û–¢–ß–ï–¢.md` - –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç

### –ú–∞—Å—Ç–µ—Ä-—Å–∫—Ä–∏–ø—Ç
- ‚úÖ `initialize_all.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

---

## üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –î–û ‚Üí –ü–û–°–õ–ï

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ | –ü–æ—Å–ª–µ |
|----------|-----|--------|
| –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ | ‚ùå –ù–µ—Ç | ‚úÖ Watchdog –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫ |
| –ë–µ–∫–∞–ø—ã | ‚ùå –í—Ä—É—á–Ω—É—é | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å |
| –î–µ–ø–ª–æ–π | ‚ö†Ô∏è –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å | ‚úÖ –° –∞–≤—Ç–æ–æ—Ç–∫–∞—Ç–æ–º |
| –ó–∞—â–∏—Ç–∞ –æ—Ç rsync | ‚ùå –ù–µ—Ç | ‚úÖ .deployignore |
| DEV/PROD –∏–∑–æ–ª—è—Ü–∏—è | ‚ùå –ù–µ—Ç | ‚úÖ –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | ‚ùå –ù–µ—Ç | ‚úÖ healthcheck + full_check |
| –¢–µ—Å—Ç—ã | ‚ùå –ù–µ—Ç | ‚úÖ –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã + git hooks |
| –î–∏—Å–∫ | ‚ö†Ô∏è 86% | ‚úÖ 78% |
| –§–æ—Ç–æ | 5473 —Ñ–∞–π–ª–∞ | 100 –∑–∞–ø–∏—Å–µ–π |

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ –∏ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –ø–∞–¥–µ–Ω–∏–π:

1. ‚úÖ **Watchdog —Å–ª–µ–¥–∏—Ç** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É–ø–∞–≤—à–∏–µ —Å–µ—Ä–≤–∏—Å—ã
2. ‚úÖ **–ë–µ–∫–∞–ø—ã —Ä–∞–±–æ—Ç–∞—é—Ç** - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å + –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
3. ‚úÖ **–î–µ–ø–ª–æ–π –±–µ–∑–æ–ø–∞—Å–µ–Ω** - —Å health check –∏ –∞–≤—Ç–æ–æ—Ç–∫–∞—Ç–æ–º
4. ‚úÖ **–î–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã** - rsync –Ω–µ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å production
5. ‚úÖ **–î–∏—Å–∫ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω** - —Å 86% –¥–æ 78%
6. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—à—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

**–ë–æ—Ç –±–æ–ª—å—à–µ –Ω–µ —É–ø–∞–¥–µ—Ç –±–µ—Å—Å–ª–µ–¥–Ω–æ!** üéâ

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –¥–æ—Å—Ç—É–ø—ã

- **–ê–¥–º–∏–Ω–∫–∞:** https://pochtoy.us/admin/
- **–õ–æ–≥–∏–Ω:** admin
- **–ü–∞—Ä–æ–ª—å:** admin123
- **–°–µ—Ä–≤–µ—Ä:** `ssh gcp-shoesbot`
- **–ü—É—Ç—å:** `/home/pochtoy/shoesbot`

---

**–†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:** 13 –Ω–æ—è–±—Ä—è 2025  
**–ö–æ–º–º–∏—Ç:** 23400e2  
**–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ:** 27  
**–î–∏—Å–∫ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω:** 700MB  
**Watchdog:** ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω  

