# ShoesBot - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏ —Å —Ñ–æ—Ç–æ

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Ç–æ–≤–∞—Ä–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –±–∞—Ä–∫–æ–¥–æ–≤, QR-–∫–æ–¥–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å AI-–∞–Ω–∞–ª–∏–∑–æ–º.

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**‚Üí [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/README.md)** - –ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å!

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/ARCHITECTURE.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞](docs/SETUP.md) - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/API.md) - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö 33 API endpoints
- [–†–µ—à–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º](docs/TROUBLESHOOTING.md) - –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

## ‚≠ê –ß—Ç–æ –ù–æ–≤–æ–≥–æ –≤ v2.0 (–Ø–Ω–≤–∞—Ä—å 2025)

‚úÖ **–ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã:**
- Service layer –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö API (OpenAI, FASHN, eBay)
- Modular views (2758 ‚Üí 10 –º–æ–¥—É–ª–µ–π –ø–æ ~200 —Å—Ç—Ä–æ–∫)
- Custom middleware (logging, performance, error handling)
- Frontend –º–æ–¥—É–ª–∏ (Alpine.js + Axios)
- Bot refactoring (config, helpers, MessageSender)
- Comprehensive documentation —Å Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** -1,354 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, +2,867 —Å—Ç—Ä–æ–∫ —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞, 100% type hints

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Telegram –ë–æ—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –±–∞—Ä–∫–æ–¥–æ–≤ –∏ QR-–∫–æ–¥–æ–≤ –∏–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–µ–∫–æ–¥–µ—Ä–æ–≤ (zbar, opencv-qr, Google Vision OCR)
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ –¥–µ–∫–æ–¥–µ—Ä–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### Django –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üì∏ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤:**
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
  - –ü–æ–∏—Å–∫ —Å—Ç–æ–∫–æ–≤—ã—Ö —Ñ–æ—Ç–æ (Google Images, eBay, Bing)
  - –ü–æ–≤–æ—Ä–æ—Ç —Ñ–æ—Ç–æ (–≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ)
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ –¥–ª—è –ø—Ä–µ–≤—å—é
  - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ

- ü§ñ **AI-–∞–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤:**
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–≤–æ–¥–∫–∏ –ø–æ —Ç–æ–≤–∞—Ä—É (OpenAI GPT-4o Vision)
  - –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ, –±–∞—Ä–∫–æ–¥–æ–≤ –∏ GG-–ª–µ–π–±
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞
  - –ü–æ–∏—Å–∫ —Ü–µ–Ω –Ω–∞ eBay
  - –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- üìä **–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ä–∫–æ–¥–æ–≤:**
  - –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –±–∞—Ä–∫–æ–¥—É
  - Google Lens –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
shoesbot/
‚îú‚îÄ‚îÄ shoesbot/              # Telegram –±–æ—Ç (–º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
‚îÇ   ‚îú‚îÄ‚îÄ telegram_bot.py    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ helpers.py         # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ message_sender.py  # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ pipeline.py        # Pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–∫–æ–¥–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ decoders/          # –î–µ–∫–æ–¥–µ—Ä—ã –±–∞—Ä–∫–æ–¥–æ–≤ (ZBar, OpenCV, GG Label, OpenAI)
‚îÇ
‚îú‚îÄ‚îÄ shoessite/             # Django –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ manage.py
‚îÇ   ‚îú‚îÄ‚îÄ logs/              # Rotating logs (requests, errors, performance)
‚îÇ   ‚îú‚îÄ‚îÄ shoessite/         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.py    # Middleware, Logging –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ photos/            # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ç–æ
‚îÇ       ‚îú‚îÄ‚îÄ models.py      # –ú–æ–¥–µ–ª–∏ –ë–î (PhotoBatch, Photo, BarcodeResult)
‚îÇ       ‚îú‚îÄ‚îÄ views/         # **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (10 —Ñ–∞–π–ª–æ–≤)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py    # Re-exports (backward compatibility)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ upload.py      # Upload endpoints (315 lines)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ photos.py      # Photo management (189 lines)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ai.py          # AI generation (176 lines)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ search.py      # eBay search (775 lines)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ barcodes.py    # Barcode operations (449 lines)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ enhance.py     # FASHN enhancement (206 lines)
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ...            # admin, buffer, webhook
‚îÇ       ‚îú‚îÄ‚îÄ services/      # **Service layer**
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ api_client.py   # Base API client (retry, timeout, logging)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ai_service.py   # OpenAI integration (678 lines)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ fashn_service.py # FASHN AI integration (276 lines)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ search_service.py # eBay integration (235 lines)
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ image_service.py # Image processing (328 lines)
‚îÇ       ‚îú‚îÄ‚îÄ middleware/    # **Custom middleware**
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ request_logging.py    # Log all requests
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ error_handling.py     # Catch exceptions, return JSON
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ performance.py        # Track slow requests (>2s, >5s)
‚îÇ       ‚îú‚îÄ‚îÄ utils/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ error_handlers.py # API response utilities
‚îÇ       ‚îú‚îÄ‚îÄ static/photos/js/  # **Frontend modules**
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ api.js         # Axios API calls (277 lines)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ui.js          # UI utilities, toasts (389 lines)
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ photo-card.js  # Card logic (660 lines)
‚îÇ       ‚îî‚îÄ‚îÄ templates/     # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ
‚îú‚îÄ‚îÄ docs/                  # **Comprehensive documentation**
‚îÇ   ‚îú‚îÄ‚îÄ README.md          # Main docs with Mermaid diagrams
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md    # Architecture details
‚îÇ   ‚îú‚îÄ‚îÄ SETUP.md           # Installation guide
‚îÇ   ‚îú‚îÄ‚îÄ API.md             # 33 endpoints documented
‚îÇ   ‚îî‚îÄ‚îÄ TROUBLESHOOTING.md # Common issues
‚îÇ
‚îú‚îÄ‚îÄ .venv/                 # Python –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

**–°–º. [ARCHITECTURE.md](docs/ARCHITECTURE.md) –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º –∏ –¥–µ—Ç–∞–ª–µ–π.**

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

**‚Üí –°–º. [SETUP.md](docs/SETUP.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ö—Ä–∞—Ç–∫–æ)

### 1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (macOS)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ zbar –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞—Ä–∫–æ–¥–æ–≤
brew install zbar
```

### 2. Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv .venv
source .venv/bin/activate  # –∏–ª–∏ –Ω–∞ Windows: .venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –±–æ—Ç–∞
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è Django (–µ—Å–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª)
cd shoessite
pip install django pillow requests beautifulsoup4 openai python-dotenv
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
BACKEND_URL=http://localhost:8000

# OpenAI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxx
OPENAI_MODEL=gpt-4o

# FASHN AI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
FASHN_API_KEY=your_fashn_api_key_here

# eBay API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
EBAY_APP_ID=your_ebay_app_id

# Google Cloud Vision (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json

# Django
SECRET_KEY=django-insecure-change-this-in-production
DEBUG=True
ALLOWED_HOSTS=*
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Django

```bash
cd shoessite
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser  # –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

## üèÉ –ó–∞–ø—É—Å–∫

### –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞

```bash
# macOS: DYLD_LIBRARY_PATH –Ω—É–∂–µ–Ω –¥–ª—è pyzbar
DYLD_LIBRARY_PATH=/opt/homebrew/lib .venv/bin/python shoesbot/telegram_bot.py

# –ò–ª–∏ –≤ —Ñ–æ–Ω–µ:
DYLD_LIBRARY_PATH=/opt/homebrew/lib nohup .venv/bin/python shoesbot/telegram_bot.py > bot.log 2>&1 &
```

### –ó–∞–ø—É—Å–∫ Django –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

```bash
cd shoessite
python manage.py runserver 0.0.0.0:8000
```

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Telegram –±–æ—Ç

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ –±–æ—Ç—É
2. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ—á–µ—Ç –±–∞—Ä–∫–æ–¥—ã –∏ QR-–∫–æ–¥—ã
3. –û—Ç–ø—Ä–∞–≤–∏—Ç –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

**–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:**
- `/start` - —Å—Ç–∞—Ä—Ç
- `/ping` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
- `/debug_on` - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
- `/debug_off` - –æ–±—ã—á–Ω—ã–µ –ª–æ–≥–∏
- `/diag` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
- `/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º —Ñ–æ—Ç–æ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8000/admin` –∏ –≤–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤" (Photo Batches)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

- **üì∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ:**
  - ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
  - üîç –ù–∞–π—Ç–∏ —Å—Ç–æ–∫–æ–≤—ã–µ —Ñ–æ—Ç–æ (–ø–æ–∏—Å–∫ –≤ Google, eBay, Bing)
  - ‚≠ê –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ –≥–ª–∞–≤–Ω—ã–º (–¥–ª—è –ø—Ä–µ–≤—å—é)
  - ‚Ü∂ ‚Ü∑ –ü–æ–≤–µ—Ä–Ω—É—Ç—å —Ñ–æ—Ç–æ
  - ‚úï –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ

- **ü§ñ AI-–∞–Ω–∞–ª–∏–∑:**
  - ‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–¥–∫—É (–∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ + –±–∞—Ä–∫–æ–¥–æ–≤ + AI)
  - ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–¥–∫—É (—Ç–µ–∫—Å—Ç –∏–ª–∏ –≥–æ–ª–æ—Å–æ–º)
  - ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–≤–æ–¥–∫—É –∫ –∫–∞—Ä—Ç–æ—á–∫–µ (–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π)

- **üìä –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**
  - –ü–æ–∏—Å–∫ –ø–æ –±–∞—Ä–∫–æ–¥—É (Google Lens, Google Shopping, Bing)
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ü–µ–Ω –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üîß API Endpoints

**‚Üí –°–º. [API.md](docs/API.md) –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ 33 endpoints**

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

1. **Upload & Buffer** (10 endpoints) - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —Ñ–æ—Ç–æ
2. **Photo Management** (6 endpoints) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ (rotate, delete, reorder)
3. **AI & Enhancement** (4 endpoints) - OpenAI summary, FASHN enhancement
4. **Search & Barcodes** (4 endpoints) - –ü–æ–∏—Å–∫ –ø–æ –±–∞—Ä–∫–æ–¥–∞–º, eBay integration
5. **Admin & Webhooks** (4 endpoints) - –ê–¥–º–∏–Ω –∑–∞–¥–∞—á–∏, Pochtoy webhook

## üóÑÔ∏è –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### PhotoBatch (–ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞)
- `correlation_id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–∞—Ä—Ç–æ—á–∫–∏
- `title`, `description`, `price`, `brand`, `size`, `color`, `category`, `condition`
- `status` - —Å—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (pending, processed, failed)

### Photo (–§–æ—Ç–æ)
- `batch` - —Å–≤—è–∑—å —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π —Ç–æ–≤–∞—Ä–∞
- `image` - —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `is_main` - –≥–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ (–¥–ª—è –ø—Ä–µ–≤—å—é)
- `order` - –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### BarcodeResult (–ë–∞—Ä–∫–æ–¥)
- `photo` - —Å–≤—è–∑—å —Å —Ñ–æ—Ç–æ
- `symbology` - —Ç–∏–ø –±–∞—Ä–∫–æ–¥–∞ (UPCA, QRCODE, CODE39 –∏ —Ç.–¥.)
- `data` - –¥–∞–Ω–Ω—ã–µ –±–∞—Ä–∫–æ–¥–∞
- `source` - –∏—Å—Ç–æ—á–Ω–∏–∫ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (zbar, opencv-qr, vision-ocr, gg-label)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –§–∞–π–ª `.env` –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ git (–¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–π `SECRET_KEY` –¥–ª—è Django
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ `ALLOWED_HOSTS` –≤ production
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ API –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**‚Üí –°–º. [TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞**

### –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ—à–µ–Ω–∏—è:

```bash
# Django –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
python manage.py migrate
python manage.py runserver

# Bot –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
pkill -f telegram_bot.py
python telegram_bot.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f shoessite/logs/errors.log
tail -f shoessite/logs/performance.log
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

**–î–æ:**
- views.py: 2758 —Å—Ç—Ä–æ–∫
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞: ~1000+ —Å—Ç—Ä–æ–∫
- AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –∫–æ–¥—É
- Error handling: –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è try-except –±–ª–æ–∫–∏

**–ü–æ—Å–ª–µ:**
- views/: 10 –º–æ–¥—É–ª–µ–π –ø–æ ~200 —Å—Ç—Ä–æ–∫
- Services layer: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- Middleware: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- Error handling utilities + –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ -1,354 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ +2,867 —Å—Ç—Ä–æ–∫ —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ 100% type hints –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
- ‚úÖ Comprehensive documentation

## üîÑ –û—Ç–∫–∞—Ç –∫ –ü—Ä–µ–¥—ã–¥—É—â–µ–π –í–µ—Ä—Å–∏–∏

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤–µ—Ä—Å–∏–∏ –¥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
git checkout backup/pre-refactoring-2025-01-10

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tag
git checkout backup-before-refactoring
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üë§ –ê–≤—Ç–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º —Ñ–æ—Ç–æ –∏ –±–∞—Ä–∫–æ–¥–æ–≤.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Python 3.9+, Django 4.2, python-telegram-bot
- **AI**: OpenAI GPT-4 Vision, FASHN AI (Product to Model)
- **Search**: eBay Finding API, Google Cloud Vision (optional)
- **Barcode**: pyzbar (ZBar), OpenCV, Custom GG Label decoder
- **Frontend**: Alpine.js 3.x, Axios, Vanilla JS modules
- **Infrastructure**: Custom middleware, rotating logs, error handling utilities

## üìö Further Reading

- [Architecture Details](docs/ARCHITECTURE.md) - Mermaid diagrams, design decisions
- [Setup Guide](docs/SETUP.md) - Installation, deployment, configuration
- [API Documentation](docs/API.md) - All 33 endpoints with examples
- [Troubleshooting](docs/TROUBLESHOOTING.md) - Solutions to common issues

---

**Version**: 2.0 (Post-Refactoring)
**Last Updated**: –Ø–Ω–≤–∞—Ä—å 2025
**License**: Internal use only
